<html>

<body>
<h1>Index.html</h1>


<button onClick="print()">Print</button>
<button onclick="printMultiple()">PrintMultiple</button>
</body>

<script>

    function reqListener () {
        console.log(this.responseText);
    }


    function print(){
        var oReq = new XMLHttpRequest();

        oReq.onload = function(e) {
            console.log(this.response)
            var file = new Blob([this.response], {type: 'image/png'});
            var url = window.URL || window.webkitURL;
            var element = document.createElement('a');
            element.setAttribute('href', url.createObjectURL(file));
            element.setAttribute('download', "tickets.png");

            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }
        let ticket = {
            "tipologiaTicket": {
                "_id": "420db36e370e0aa7a7c79a263cd725d1",
                "_rev": "3-cbe6d7d7ea52af1aee86354836ae1fd6",
                "nome": "Ticket Standard",
                "categoria": "Intero - Sito singolo",
                "prezzo": 2
            },
            "siti": [{
                "_id": "31091283h9r8i3hf230nfo2if0923j",
                "_rev": "31091283h9r8i3hf230nfo2if0923j",
                "nome": "castello",
                "descrizioneBreve": "Castello Murat"
            }],
            "tourOperator": {
                "_id": "f7ea7197f14a2573e8b30b5d7acd2ec3",
                "_rev": "1-176fff0a830d903c98ea68e8226d9636",
                "nome": "Gianni Esposito",
                "citta": "Milano",
                "telefono": "+39 023456789",
                "societa": "AlpiTour S.p.A",
                "provincia": "Milano",
                "indirizzo": "corso Sempione 5",
                "cap": 21020
            },
            "nIngressi": 6,
            "nazione": "GER",
            "totaleEuro": 2.50
        }


        oReq.responseType = "arraybuffer";
        oReq.open("POST", "http://localhost:8080/api/ts/createOrUpdateTicketStandard?mode=single");
        oReq.setRequestHeader("Content-Type", "application/json");
        oReq.setRequestHeader("Authorization", "Bearer ey");
        oReq.send(JSON.stringify(ticket));

    }

    function printMultiple(){
        var oReq = new XMLHttpRequest();

        oReq.onload = function(e) {
            console.log(this.response)
            var file = new Blob([this.response], {type: 'image/png'});
            var url = window.URL || window.webkitURL;
            var element = document.createElement('a');
            element.setAttribute('href', url.createObjectURL(file));
            element.setAttribute('download', "tickets.png");

            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }
        let ticket = {
            "tipologiaTicket": {
                "_id": "420db36e370e0aa7a7c79a263cd725d1",
                "_rev": "3-cbe6d7d7ea52af1aee86354836ae1fd6",
                "nome": "Ticket Standard",
                "categoria": "Intero - Sito singolo",
                "prezzo": 2
            },
            "siti": [{
                "_id": "31091283h9r8i3hf230nfo2if0923j",
                "_rev": "31091283h9r8i3hf230nfo2if0923j",
                "nome": "castello",
                "descrizioneBreve": "Castello Murat"
            }],
            "tourOperator": {
                "_id": "f7ea7197f14a2573e8b30b5d7acd2ec3",
                "_rev": "1-176fff0a830d903c98ea68e8226d9636",
                "nome": "Gianni Esposito",
                "citta": "Milano",
                "telefono": "+39 023456789",
                "societa": "AlpiTour S.p.A",
                "provincia": "Milano",
                "indirizzo": "corso Sempione 5",
                "cap": 21020
            },
            "nIngressi": 6,
            "nazione": "GER",
            "totaleEuro": 2.50
        }
        oReq.responseType = "arraybuffer";
        oReq.open("POST", "http://localhost:8080/api/ts/createOrUpdateTicketStandard?mode=multiple");
        oReq.setRequestHeader("Content-Type", "application/json");
        oReq.setRequestHeader("Authorization", "Bearer ey");
        oReq.send(JSON.stringify(ticket));

    }
</script>
</html>